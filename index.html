<script>
  const API_URL = "https://script.google.com/macros/s/AKfycbwt9GgDTFKKAmUeqTZuPrlWy2R7bSAbz2EApE2dxIDkCZvAlfK0uN8ULn6oUqPSf3PuUg/exec";

  const premios = [
    { nome: "Skin rara", chance: 50 },
    { nome: "100 moedas", chance: 30 },
    { nome: "Nada ðŸ˜¢", chance: 20 }
  ];

  function sortearPremio() {
    const total = premios.reduce((acc, p) => acc + p.chance, 0);
    let r = Math.random() * total, ac = 0;
    for (const p of premios) { ac += p.chance; if (r <= ac) return p.nome; }
  }

  async function girar() {
    const nick = document.getElementById("nick").value.trim();
    if (!nick) { alert("Digite seu nick!"); return; }

    const premio = sortearPremio();
    document.getElementById("resultado").innerText = `${nick} ganhou: ${premio}`;

    try {
      await fetch(API_URL, {
        method: "POST",
        headers: { "Content-Type": "application/x-www-form-urlencoded" },
        body: new URLSearchParams({ nick, premio }).toString()
      });
    } catch (e) {
      alert("Erro ao salvar resultado: " + e);
    }
  }
</script>
